<!DOCTYPE html>
<style>

body{
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  
	-webkit-font-smoothing:antialiased;
  
  font-weight:300;
  font-family:Helvetica;
  
  text-align:center;
}

.header{
  background:rgb(0,188,212);
  
  padding:20px;
  
  text-align:left;
  
  position:relative;
}
.header:after{
  visibility:hidden;
  display:block;
  font-size:0;
  content:' ';
  clear:both;
  height:0;
}
.header .timer{
  float:right;
  
  display:block;
  vertical-align:middle;
  
  border:4px dashed rgba(255,255,255,0.75);
	-webkit-border-radius: 3px;
	-moz-border-radius:    3px;
	border-radius:         3px;
  
  color:rgb(255,255,255);
  
  font-size:30px;
  font-weight:700;
  
  padding:12px 26px;
  min-width:70px;
  
  text-align:center;
}
.header .menubutton{
  position:absolute;
  left:20px;
  top:50%;
  
  -webkit-transform:translate(0, -50%);
  -moz-transform:   translate(0, -50%);
  -mos-transform:   translate(0, -50%);
  -o-transform:     translate(0, -50%);
  transform:        translate(0, -50%);
  
  background:transparent center center no-repeat;
  background-size:48px 48px;
  background-image:url(/images/hamburger.svg);
  
  width: 48px;
  height:48px;
  
  cursor:pointer;
}

.content{
  padding:80px 20px;
}

.board{
  padding:0px 20px 80px 20px;
}

square\:dest{
  display:inline-block;
  
  vertical-align:middle;
  
  box-shadow:inset 1px 1px 0px 1px rgb(210,210,210);
  background:rgb(230,230,230);
  
	-webkit-border-radius: 3px;
	-moz-border-radius:    3px;
	border-radius:         3px;
  overflow:hidden;
  
  margin:6px;
  
  cursor:default;
}
square\:dest square,
square\:moving{
  display:block;
  
  background:rgb(232,48,108);
  color:rgb(255,255,255);
  
  height:100%;
  width:100%;
  
  font-family:Arial;
  font-size:30px;
  font-weight:700;
  text-align:center;
  text-transform:uppercase;
  
  cursor:move;
}
square\:dest square.moving{
  display:none;
}
square\:dest square.locked{
  cursor:not-allowed;
  
  background:rgb(146,160,160);
}
square\:dest,
square\:moving{
  height:     80px;
  width:      80px;
  line-height:80px;
}
square\:moving{
  position:absolute;
  
  z-index:999;
  
	-webkit-border-radius: 3px;
	-moz-border-radius:    3px;
	border-radius:         3px;

  -webkit-animation: animation 1000ms linear both;
  animation:         animation 1000ms linear both;
}

/* Bounce.js */
@keyframes animation{
  0%{
    box-shadow:0 0 0 transparent;
    -webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
  }
  3.4%{
    -webkit-transform:matrix3d(1.095,0,0,0,0,1.122,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.095,0,0,0,0,1.122,0,0,0,0,1,0,0,0,0,1);
  }
  4.7%{
    -webkit-transform:matrix3d(1.135,0,0,0,0,1.18,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.135,0,0,0,0,1.18,0,0,0,0,1,0,0,0,0,1);
  }
  6.81%{
    -webkit-transform:matrix3d(1.198,0,0,0,0,1.268,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.198,0,0,0,0,1.268,0,0,0,0,1,0,0,0,0,1);
  }
  9.41%{
    -webkit-transform:matrix3d(1.265,0,0,0,0,1.35,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.265,0,0,0,0,1.35,0,0,0,0,1,0,0,0,0,1);
  }
  10.21%{
    -webkit-transform:matrix3d(1.282,0,0,0,0,1.368,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.282,0,0,0,0,1.368,0,0,0,0,1,0,0,0,0,1);
  }
  13.61%{
    -webkit-transform:matrix3d(1.337,0,0,0,0,1.4,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.337,0,0,0,0,1.4,0,0,0,0,1,0,0,0,0,1);
  }
  14.11%{
    -webkit-transform:matrix3d(1.342,0,0,0,0,1.399,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.342,0,0,0,0,1.399,0,0,0,0,1,0,0,0,0,1);
  }
  17.52%{
    -webkit-transform:matrix3d(1.362,0,0,0,0,1.372,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.362,0,0,0,0,1.372,0,0,0,0,1,0,0,0,0,1);
  }
  18.72%{
    -webkit-transform:matrix3d(1.364,0,0,0,0,1.356,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.364,0,0,0,0,1.356,0,0,0,0,1,0,0,0,0,1);
  }
  21.32%{
    -webkit-transform:matrix3d(1.359,0,0,0,0,1.321,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.359,0,0,0,0,1.321,0,0,0,0,1,0,0,0,0,1);
  }
  24.32%{
    -webkit-transform:matrix3d(1.345,0,0,0,0,1.288,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.345,0,0,0,0,1.288,0,0,0,0,1,0,0,0,0,1);
  }
  25.23%{
    -webkit-transform:matrix3d(1.34,0,0,0,0,1.281,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.34,0,0,0,0,1.281,0,0,0,0,1,0,0,0,0,1);
  }
  29.03%{
  box-shadow:0 0 20px rgba(0,0,0,0.3);
    -webkit-transform:matrix3d(1.319,0,0,0,0,1.269,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.319,0,0,0,0,1.269,0,0,0,0,1,0,0,0,0,1);
  }
  29.93%{
    -webkit-transform:matrix3d(1.314,0,0,0,0,1.27,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.314,0,0,0,0,1.27,0,0,0,0,1,0,0,0,0,1);
  }
  35.54%{
    -webkit-transform:matrix3d(1.294,0,0,0,0,1.289,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.294,0,0,0,0,1.289,0,0,0,0,1,0,0,0,0,1);
  }
  36.74%{
    -webkit-transform:matrix3d(1.291,0,0,0,0,1.294,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.291,0,0,0,0,1.294,0,0,0,0,1,0,0,0,0,1);
  }
  41.04%{
    -webkit-transform:matrix3d(1.288,0,0,0,0,1.307,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.288,0,0,0,0,1.307,0,0,0,0,1,0,0,0,0,1);
  }
  44.44%{
    -webkit-transform:matrix3d(1.29,0,0,0,0,1.31,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.29,0,0,0,0,1.31,0,0,0,0,1,0,0,0,0,1);
  }
  52.15%{
    -webkit-transform:matrix3d(1.297,0,0,0,0,1.302,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.297,0,0,0,0,1.302,0,0,0,0,1,0,0,0,0,1);
  }
  59.86%{
    -webkit-transform:matrix3d(1.302,0,0,0,0,1.297,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.302,0,0,0,0,1.297,0,0,0,0,1,0,0,0,0,1);
  }
  63.26%{
    -webkit-transform:matrix3d(1.302,0,0,0,0,1.298,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.302,0,0,0,0,1.298,0,0,0,0,1,0,0,0,0,1);
  }
  75.28%{
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.301,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.301,0,0,0,0,1,0,0,0,0,1);
  }
  85.49%{
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
  }
  90.69%{
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
  }
  100%{
    box-shadow:0 0 20px rgba(0,0,0,0.3);
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
  }
}
@-webkit-keyframes animation{
  0%{
    box-shadow:0 0 0 transparent;
    -webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
  }
  3.4%{
    -webkit-transform:matrix3d(1.095,0,0,0,0,1.122,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.095,0,0,0,0,1.122,0,0,0,0,1,0,0,0,0,1);
  }
  4.7%{
    -webkit-transform:matrix3d(1.135,0,0,0,0,1.18,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.135,0,0,0,0,1.18,0,0,0,0,1,0,0,0,0,1);
  }
  6.81%{
    -webkit-transform:matrix3d(1.198,0,0,0,0,1.268,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.198,0,0,0,0,1.268,0,0,0,0,1,0,0,0,0,1);
  }
  9.41%{
    -webkit-transform:matrix3d(1.265,0,0,0,0,1.35,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.265,0,0,0,0,1.35,0,0,0,0,1,0,0,0,0,1);
  }
  10.21%{
    -webkit-transform:matrix3d(1.282,0,0,0,0,1.368,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.282,0,0,0,0,1.368,0,0,0,0,1,0,0,0,0,1);
  }
  13.61%{
    -webkit-transform:matrix3d(1.337,0,0,0,0,1.4,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.337,0,0,0,0,1.4,0,0,0,0,1,0,0,0,0,1);
  }
  14.11%{
    -webkit-transform:matrix3d(1.342,0,0,0,0,1.399,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.342,0,0,0,0,1.399,0,0,0,0,1,0,0,0,0,1);
  }
  17.52%{
    -webkit-transform:matrix3d(1.362,0,0,0,0,1.372,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.362,0,0,0,0,1.372,0,0,0,0,1,0,0,0,0,1);
  }
  18.72%{
    -webkit-transform:matrix3d(1.364,0,0,0,0,1.356,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.364,0,0,0,0,1.356,0,0,0,0,1,0,0,0,0,1);
  }
  21.32%{
    -webkit-transform:matrix3d(1.359,0,0,0,0,1.321,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.359,0,0,0,0,1.321,0,0,0,0,1,0,0,0,0,1);
  }
  24.32%{
    -webkit-transform:matrix3d(1.345,0,0,0,0,1.288,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.345,0,0,0,0,1.288,0,0,0,0,1,0,0,0,0,1);
  }
  25.23%{
    -webkit-transform:matrix3d(1.34,0,0,0,0,1.281,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.34,0,0,0,0,1.281,0,0,0,0,1,0,0,0,0,1);
  }
  29.03%{
    box-shadow:0 0 20px rgba(0,0,0,0.3);
    -webkit-transform:matrix3d(1.319,0,0,0,0,1.269,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.319,0,0,0,0,1.269,0,0,0,0,1,0,0,0,0,1);
  }
  29.93%{
    -webkit-transform:matrix3d(1.314,0,0,0,0,1.27,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.314,0,0,0,0,1.27,0,0,0,0,1,0,0,0,0,1);
  }
  35.54%{
    -webkit-transform:matrix3d(1.294,0,0,0,0,1.289,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.294,0,0,0,0,1.289,0,0,0,0,1,0,0,0,0,1);
  }
  36.74%{
    -webkit-transform:matrix3d(1.291,0,0,0,0,1.294,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.291,0,0,0,0,1.294,0,0,0,0,1,0,0,0,0,1);
  }
  41.04%{
    -webkit-transform:matrix3d(1.288,0,0,0,0,1.307,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.288,0,0,0,0,1.307,0,0,0,0,1,0,0,0,0,1);
  }
  44.44%{
    -webkit-transform:matrix3d(1.29,0,0,0,0,1.31,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.29,0,0,0,0,1.31,0,0,0,0,1,0,0,0,0,1);
  }
  52.15%{
    -webkit-transform:matrix3d(1.297,0,0,0,0,1.302,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.297,0,0,0,0,1.302,0,0,0,0,1,0,0,0,0,1);
  }
  59.86%{
    -webkit-transform:matrix3d(1.302,0,0,0,0,1.297,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.302,0,0,0,0,1.297,0,0,0,0,1,0,0,0,0,1);
  }
  63.26%{
    -webkit-transform:matrix3d(1.302,0,0,0,0,1.298,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.302,0,0,0,0,1.298,0,0,0,0,1,0,0,0,0,1);
  }
  75.28%{
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.301,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.301,0,0,0,0,1,0,0,0,0,1);
  }
  85.49%{
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
  }
  90.69%{
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
  }
  100%{
    box-shadow:0 0 20px rgba(0,0,0,0.3);
    -webkit-transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
    transform:matrix3d(1.3,0,0,0,0,1.3,0,0,0,0,1,0,0,0,0,1);
  }
}

.drop h2{
  text-transform:uppercase;
  font-size:12px;
  font-weight:700;
  text-align:center;
  
  color:rgb(51,51,51);
}

.menu{
  position:fixed;
  top:0px;
  left:0px;
  right:0px;
  bottom:0px;
  
  -webkit-transform:translate(-100%, 0);
     -mos-transform:translate(-100%, 0);
     -moz-transform:translate(-100%, 0);
       -o-transform:translate(-100%, 0);
          transform:translate(-100%, 0);
  
  -webkit-transition:all 400ms;
     -mos-transition:all 400ms;
     -moz-transition:all 400ms;
       -o-transition:all 400ms;
          transition:all 400ms;
  
  background:rgb(0,188,212);
  
  padding-top:200px;
  
  font-size:24px;
  font-weight:400;
  text-transform:uppercase;
  
  color:rgb(51,51,51);
  text-align:center;
}
.menu.open{
  -webkit-transform:translate(0%, 0);
  -mos-transform:   translate(0%, 0);
  -moz-transform:   translate(0%, 0);
  -o-transform:     translate(0%, 0);
  transform:        translate(0%, 0);
}
.menu h2,
.menu h3{
  margin:0px;
  padding:10px 0px;
}
.menu h2{
  font-weight:700;
  
  padding:0px 0px 30px 0px;
}

@media screen and (min-width: 1000px){
  .board{
    display:inline-block;
    vertical-align:top;
    
    padding-bottom:0px;
  }
  
  .drop{
    display:inline-block;
    vertical-align:top;
    
    background:rgb(245,245,245);
    
    padding:20px;
    margin:6px 0px;
    
  	-webkit-border-radius: 3px;
  	-moz-border-radius:    3px;
  	border-radius:         3px;
  }
}

</style>
<html>
<head>

<title>4Square &middot; The Fun Word Game</title>

<meta charset="utf-8" />

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">

<meta content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no" name="viewport"/>

<link rel="stylesheet" href="/resources/css/resets.css"/>

<script src='/resources/scripts/util/Overload.min.js'></script>
<script src='/resources/scripts/util/classie.js'></script>
<script src='/resources/scripts/util/Post.js'></script>
<script src='/resources/scripts/util/TrieTree.js'></script>
<script src='/resources/scripts/util/EventDispatcher.js'></script>

<script src='/resources/scripts/Board.js'></script>
<script src='/resources/scripts/Game.js'></script>
<script src='/resources/scripts/Square.js'></script>
<script src='/resources/scripts/SquareDest.js'></script>

</head>
<body>


<div class='menu'>
  <h2>New Game</h2>
  <h3 tag='easy'>Easy</h3>
  <h3 tag='med'>Medium</h3>
  <h3 tag='hard'>Hard</h3>
  <h3 tag='imp'>Impossibru!</h3>
</div>

<div class='header'>
  <div class='menubutton'></div>
  <div class='timer'>0:00</div>
</div>

<div class='content'>
  <div class='board'></div>

  <div class='drop'>
    <h2>dropspace</h2>
  </div>
</div>


<script type='text/javascript'>
(function(){
  
  var selectors = {
    easy: function(x, y, width, height){
      return y == 0 || y == height-1;
    },
    medium: function(x, y){
      return x == y;
    },
    hard: function(x, y, width, height){
      return x == 0       && y == 0        ||
             x == 0       && y == height-1 ||
             x == width-1 && y == 0        ||
             x == width-1 && y == height-1;
    },
    impossibru: function(){
      return false;
    }
  }
  
  // pared by me from http://www-01.sil.org/linguistics/wordlists/english/wordlist/wordsEn.txt
  function LoadDictionary(callback){
    var dicts = ['/resources/dict_4.txt'],
        words = [],
        loads = 0;
    
    for(var i=0,dict; dict=dicts[i++];)
      (function(dict){
        Get(dict, function OnResponse(event){
          console.log('Loaded Dict '+(loads+1)+' of '+dicts.length);
        
          words = words.concat(event.responseText.split(','));
          if(++loads == dicts.length) OnFinish();
        });
      })(dict);
    
    function OnFinish(){
      if(typeof callback == 'function') callback(new TrieTree(words));
    }
  }
  
  window.addEventListener('load', Init);
  
  function Init(){
    
    var game;
    
    LoadDictionary(function Callback(dict){
      game = new Game(
        dict,
        document.querySelector('.board'),
        document.querySelector('.drop'),
        document.querySelector('.timer')
      );
      
      game.addEventListener('win', OnWin);
      
      game.create(4,4,selectors.easy);
    });
    
    function OnWin(){
      setTimeout(function(){
        alert('You Won!');
      }, 150);
    }
    
    document.querySelector('.header .menubutton').addEventListener('click', ToggleMenu);
    function ToggleMenu(){
      var menu = document.querySelector('.menu');
      if(classie.has(menu, 'open')){
        classie.remove(document.querySelector('.menu'), 'open');
        if(!game.isComplete()) game.resume();
      }else{
        classie.add(document.querySelector('.menu'), 'open');
        game.pause();
      }
    }
    
    document.querySelector('.menu *[tag=easy]').addEventListener('click', function(){
      game.create(4,4,selectors.easy);
      ToggleMenu();
    });
    document.querySelector('.menu *[tag=med]').addEventListener('click', function(){
      game.create(4,4,selectors.medium);
      ToggleMenu();
    });
    document.querySelector('.menu *[tag=hard]').addEventListener('click', function(){
      game.create(4,4,selectors.hard);
      ToggleMenu();
    });
    document.querySelector('.menu *[tag=imp]').addEventListener('click', function(){
      game.create(4,4,selectors.impossibru);
      ToggleMenu();
    });
    
  }
  
})();
</script>
</body>
</html>
